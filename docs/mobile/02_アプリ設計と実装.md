# ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªè¨­è¨ˆã¨å®Ÿè£…ã‚¬ã‚¤ãƒ‰

## æ¦‚è¦

Transfer Portal ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®è¨­è¨ˆæ€æƒ³ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ãŠã‚ˆã³å®Ÿè£…è©³ç´°ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹æˆ

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
src/
â”œâ”€â”€ components/           # å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ contexts/            # React Contextï¼ˆçŠ¶æ…‹ç®¡ç†ï¼‰
â”œâ”€â”€ hooks/              # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”œâ”€â”€ lib/                # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ navigation/         # ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”œâ”€â”€ screens/            # ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â””â”€â”€ styles/             # ã‚¹ã‚¿ã‚¤ãƒ«é–¢é€£
```

### ä¸»è¦ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Expo SDK 53 / React Native
- **çŠ¶æ…‹ç®¡ç†**: React Context + useState/useEffect
- **ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**: React Navigation v6
- **èªè¨¼**: Supabase Auth
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase PostgreSQL
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: StyleSheetï¼ˆãƒã‚¤ãƒ†ã‚£ãƒ–ï¼‰
- **å‹å®‰å…¨æ€§**: TypeScript

## ç”»é¢æ§‹æˆ

### 1. èªè¨¼ãƒ•ãƒ­ãƒ¼

#### LoginScreen (`src/screens/auth/LoginScreen.tsx`)
- ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã®ãƒ­ã‚°ã‚¤ãƒ³
- Supabaseèªè¨¼ã¨ã®é€£æº
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½

```typescript
// ä¸»è¦ãªæ©Ÿèƒ½
const handleLogin = async (email: string, password: string) => {
  const { error } = await supabase.auth.signInWithPassword({
    email,
    password,
  });
  // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
};
```

### 2. ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

#### HomeScreen (`src/screens/player/HomeScreen.tsx`)
**ç‰¹å¾´**:
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å½¢å¼ã®ãƒ›ãƒ¼ãƒ ç”»é¢
- çµ±è¨ˆæƒ…å ±ã®è¡¨ç¤ºï¼ˆç™»éŒ²æ—¥æ•°ã€ã‚ªãƒ•ã‚¡ãƒ¼æ•°ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ï¼‰
- ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é¢¨ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- ã‚«ãƒ©ãƒ•ãƒ«ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚°ãƒªãƒƒãƒ‰
- ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ©Ÿèƒ½

**ãƒ‡ã‚¶ã‚¤ãƒ³ãƒã‚¤ãƒ³ãƒˆ**:
```typescript
const menuItems = [
  { 
    title: 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«', 
    subtitle: 'åŸºæœ¬æƒ…å ±ã‚’ç®¡ç†', 
    icon: 'ğŸ‘¤', 
    color: '#667eea',
  },
  // ...
];
```

#### ProfileScreen (`src/screens/player/ProfileScreen.tsx`)
**ç‰¹å¾´**:
- ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†æ©Ÿèƒ½
- Supabaseã¨ã®é€£æºï¼ˆå°†æ¥çš„ã«å®Ÿè£…äºˆå®šï¼‰
- æ—¥æœ¬èªUIã§çµ±ä¸€
- ãƒ¢ãƒ€ãƒ³ãªãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³

**ç·¨é›†æ©Ÿèƒ½**:
```typescript
const [isEditing, setIsEditing] = useState(false);
const [profile, setProfile] = useState({
  firstName: 'å¤ªéƒ',
  lastName: 'ç”°ä¸­',
  // ... ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
});
```

#### OffersScreen (`src/screens/player/OffersScreen.tsx`)
**ç‰¹å¾´**:
- Supabaseã‹ã‚‰ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å–å¾—
- ã‚ªãƒ•ã‚¡ãƒ¼ã®æ‰¿è«¾/è¾é€€æ©Ÿèƒ½
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥ã®è‰²åˆ†ã‘è¡¨ç¤º
- ãƒ—ãƒ«ãƒˆã‚¥ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥å¯¾å¿œ

**ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ­ã‚¸ãƒƒã‚¯**:
```typescript
const fetchOffers = async () => {
  const { data: offersData, error } = await supabase
    .from('offers')
    .select(`
      *,
      scouts!offers_fromUserId_fkey(
        firstName,
        lastName,
        organizations(name)
      )
    `)
    .eq('toPlayerId', playerData.id);
};
```

#### SportsScreen (`src/screens/player/SportsScreen.tsx`)
**ç‰¹å¾´**:
- ã‚¹ãƒãƒ¼ãƒ„çµŒæ­´ã®è¿½åŠ ãƒ»ç®¡ç†
- å®Ÿç¸¾ã®è¨˜éŒ²æ©Ÿèƒ½
- ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ•ã‚©ãƒ¼ãƒ ã§ã®å…¥åŠ›
- Supabaseã¨ã®å®Œå…¨é€£æº

#### MessagesScreen (`src/screens/common/MessagesScreen.tsx`)
**ç‰¹å¾´**:
- ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤º
- æœªèª­/æ—¢èª­ç®¡ç†
- å°†æ¥çš„ãªæ‹¡å¼µã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆ

## çŠ¶æ…‹ç®¡ç†

### AuthContext (`src/contexts/AuthContext.tsx`)

èªè¨¼çŠ¶æ…‹ã‚’ã‚¢ãƒ—ãƒªå…¨ä½“ã§ç®¡ç†ã™ã‚‹Contextã€‚

```typescript
interface AuthContextType {
  user: User | null;
  session: Session | null;
  loading: boolean;
  signOut: () => Promise<void>;
}

export const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [session, setSession] = useState<Session | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // ã‚»ãƒƒã‚·ãƒ§ãƒ³ç›£è¦–
    supabase.auth.getSession().then(({ data: { session } }) => {
      setSession(session);
      setLoading(false);
    });

    const { data: { subscription } } = supabase.auth.onAuthStateChange(
      (_event, session) => {
        setSession(session);
        setLoading(false);
      }
    );

    return () => subscription.unsubscribe();
  }, []);
};
```

## ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ

### ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
function MainTabs() {
  return (
    <Tab.Navigator
      screenOptions={{
        tabBarActiveTintColor: '#667eea',
        tabBarStyle: {
          backgroundColor: '#fff',
          height: 85,
          paddingBottom: 20,
          // å½±åŠ¹æœ
          shadowColor: '#000',
          shadowOffset: { width: 0, height: -4 },
          shadowOpacity: 0.1,
          shadowRadius: 20,
        },
      }}
    >
      {/* å„ã‚¿ãƒ–ã®è¨­å®š */}
    </Tab.Navigator>
  );
}
```

### ãƒã‚¹ãƒˆã—ãŸãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
function AppNavigator() {
  const { session, loading } = useAuth();

  return (
    <NavigationContainer>
      <Stack.Navigator>
        {session ? (
          <Stack.Screen name="Main" component={MainTabs} />
        ) : (
          <Stack.Screen name="Login" component={LoginScreen} />
        )}
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```

## ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

```typescript
const colors = {
  primary: '#667eea',      // ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼
  secondary: '#764ba2',    // ã‚µãƒ–ã‚«ãƒ©ãƒ¼
  success: '#34C759',      // æˆåŠŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  warning: '#FF9500',      // è­¦å‘Š
  error: '#ff4757',        // ã‚¨ãƒ©ãƒ¼ãƒ»å‰Šé™¤
  background: '#f8f9fa',   // èƒŒæ™¯è‰²
  surface: '#ffffff',      // ã‚«ãƒ¼ãƒ‰èƒŒæ™¯
  text: '#333333',         // ãƒ¡ã‚¤ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
  textSecondary: '#666666', // ã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆ
};
```

### å…±é€šã‚¹ã‚¿ã‚¤ãƒ«

```typescript
const commonStyles = {
  shadow: {
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.12,
    shadowRadius: 16,
    elevation: 8,
  },
  card: {
    backgroundColor: '#fff',
    borderRadius: 20,
    padding: 20,
  },
  button: {
    borderRadius: 16,
    paddingVertical: 16,
    alignItems: 'center',
  },
};
```

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### Supabaseé€£æºãƒ‘ã‚¿ãƒ¼ãƒ³

1. **ãƒ‡ãƒ¼ã‚¿å–å¾—**:
```typescript
const fetchData = async () => {
  try {
    const { data, error } = await supabase
      .from('table_name')
      .select('*')
      .eq('condition', value);
    
    if (error) throw error;
    setData(data);
  } catch (error) {
    Alert.alert('ã‚¨ãƒ©ãƒ¼', 'ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
  }
};
```

2. **ãƒ‡ãƒ¼ã‚¿æ›´æ–°**:
```typescript
const updateData = async (id: string, updates: object) => {
  try {
    const { error } = await supabase
      .from('table_name')
      .update(updates)
      .eq('id', id);
    
    if (error) throw error;
    // ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ã‚‚æ›´æ–°
    setData(prevData => 
      prevData.map(item => 
        item.id === id ? { ...item, ...updates } : item
      )
    );
  } catch (error) {
    Alert.alert('ã‚¨ãƒ©ãƒ¼', 'æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ');
  }
};
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ç”»åƒæœ€é©åŒ–
- Expoã®æœ€é©åŒ–ã•ã‚ŒãŸç”»åƒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨
- é©åˆ‡ãªã‚µã‚¤ã‚ºã§ã®ç”»åƒè¡¨ç¤º

### 2. ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–
```typescript
// React.memoã§ã®æœ€é©åŒ–
const OptimizedComponent = React.memo(({ data }) => {
  return <View>{/* ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…å®¹ */}</View>;
});

// useCallbackã§ã®é–¢æ•°ãƒ¡ãƒ¢åŒ–
const handlePress = useCallback(() => {
  // å‡¦ç†å†…å®¹
}, [dependency]);
```

### 3. ãƒªã‚¹ãƒˆæœ€é©åŒ–
```typescript
// FlatListã§ã®ä»®æƒ³åŒ–
<FlatList
  data={items}
  renderItem={({ item }) => <ItemComponent item={item} />}
  keyExtractor={(item) => item.id}
  removeClippedSubviews={true}
  maxToRenderPerBatch={10}
  windowSize={10}
/>
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### 1. èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã®ç®¡ç†
- AsyncStorageã§ã®å®‰å…¨ãªä¿å­˜
- è‡ªå‹•æ›´æ–°æ©Ÿèƒ½

### 2. APIã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```typescript
const handleApiError = (error: any) => {
  if (error.status === 401) {
    // èªè¨¼ã‚¨ãƒ©ãƒ¼ - ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    signOut();
  } else {
    // ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼
    Alert.alert('ã‚¨ãƒ©ãƒ¼', error.message || 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
  }
};
```

### 3. å…¥åŠ›å€¤æ¤œè¨¼
```typescript
const validateInput = (value: string, type: 'email' | 'password') => {
  switch (type) {
    case 'email':
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
    case 'password':
      return value.length >= 8;
    default:
      return false;
  }
};
```

## ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

### 1. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
- SQLiteã§ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- åŒæœŸæ©Ÿèƒ½ã®å®Ÿè£…

### 2. ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- Expo Notificationsã®å®Ÿè£…
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
- Flipperã§ã®ãƒ‡ãƒãƒƒã‚°
- ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ä¿å®ˆã—ã‚„ã™ã„ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚